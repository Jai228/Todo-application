

<div class="todo-container p-4 overflow-auto">
<div class="Todo-functionality flex gap-4 items-center">
  <button matButton="elevated" matButton="filled" (click)="openAddDialog()" class="demo-button">
    Add Todo
  </button>

    <mat-form-field class="filter-input">
  <input matInput (keyup)="applyFilter()" [(ngModel)]="filterTitle" placeholder="Enter title...">
  <mat-hint>Filter by tittle</mat-hint>
</mat-form-field>
  
<mat-form-field class="filter-input">
  <mat-label>Select</mat-label>
  <mat-select [(ngModel)]="filterTag" (selectionChange)="applyFilter()">
    <mat-option value="">All</mat-option>
    <mat-option *ngFor="let tag of allTags" [value]="tag">{{ tag }}</mat-option>
  </mat-select>
  <mat-hint>Filter by tags</mat-hint>
</mat-form-field>

</div>


<div class="table-container overflow-auto">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 full-width ">

    <ng-container matColumnDef="Status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let todo"> 
        <!-- <input type="checkbox" [checked]="todo.completed" (change)="toggleCompletion(todo)"/> -->
        <div class="status-toggle-wrapper">
    <mat-slide-toggle class="stat-slider"
      [checked]="todo.completed"
      (change)="toggleCompletion(todo)"> 
    </mat-slide-toggle>
  </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let todo"> {{ todo.title }}
        <ul><li *ngFor="let tags of todo.tags">{{tags}}</li></ul>
      </td>
    </ng-container>

    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let todo">{{ todo.description }}</td>
    </ng-container>

    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>Created At</th>
      <td mat-cell *matCellDef="let todo">{{ todo.createdAt |date: 'dd MMM yyyy, h:mm a'}}</td>
    </ng-container>

    <ng-container matColumnDef="updatedAt">
      <th mat-header-cell *matHeaderCellDef>Updated At</th>
      <td mat-cell *matCellDef="let todo">{{ todo.updatedAt |date: 'dd MMM yyyy, h:mm:ss.SS a'}}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let todo">
        <div class="action-btns gap-2 flex">
        <button matMiniFab class="delete-btn hover:bg-black" (click)="deleteTodo(todo)">
          <mat-icon fontIcon="delete"></mat-icon>
        </button>
        <button class="editbutton" matButton="filled" (click)="openEditDialog(todo)">Edit</button>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns "></tr>
  </table>
  </div>
</div>
